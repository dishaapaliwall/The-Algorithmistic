<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linear Search — AlgoVisuals</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet" />
<script src="https://kit.fontawesome.com/c737e8ac77.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/style1.css" />
</head>
<body>
<%- include("partials/header") %>

<main class="container">
<div style="max-width:1200px; margin:60px auto; background:#181818; border-radius:24px; padding:38px; box-shadow:0 8px 34px #000a;">
<h1 style="background: linear-gradient(90deg,#3B82F6 0%,#A855F7 100%); -webkit-background-clip: text; background-clip: text; color: transparent; font-size:2.6rem; font-weight:800; margin-bottom:10px; display:inline;"> Linear Search</h1>
<span class="badge"
        style="background: linear-gradient(90deg,#E55D86 0%, #D0197E 100%); color: #fff; border-radius:8px; padding:6px 18px; margin-left:14px; font-size:1.1rem;">Searching</span>
      <span class="badge"
        style="background: linear-gradient(90deg,#2fc47f 0%, #3B82F6 100%); color: #fff; border-radius:8px; padding:6px 18px; margin-left:8px; font-size:1.1rem;">Easy</span>
<p style="color:#a8a8a8; margin-top:13px;">A simple searching algorithm that checks every element in the array sequentially until the target element is found or the end of the array is reached.</p>

<div style="display:flex; gap:24px; margin-bottom:20px; margin-top:24px;">
  <div style="flex:1; background: linear-gradient(180deg, #191919 0%, #181818 100%); border-radius:13px; padding:22px 18px; color:#fff; border:1px solid #232;">
    <div style="display:flex; align-items:center; gap:9px; margin-bottom:9px;">
      <i class="fa-regular fa-clock" style="color:#3B82F6; font-size:23px;"></i>
      <span style="font-weight:900;">Time Complexity</span>
    </div>
    <div style="margin-top:7px;">
      <div style="display:flex; justify-content:space-between; margin-bottom:7px;">
        <span style="color:#a9a9a9;">Best Case:</span>
        <span style="background:#3bdf8d2b; color:#16ad56; padding:4px 19px; border-radius:7px;font-weight:700;">O(1)</span>
      </div>
      <div style="display:flex; justify-content:space-between; margin-bottom:7px;">
        <span style="color:#a9a9a9;">Average Case:</span>
        <span style="background:#f5ca5035; color:#ceb254; padding:4px 14px; border-radius:7px;font-weight:700;">O(n)</span>
      </div>
      <div style="display:flex; justify-content:space-between;">
        <span style="color:#a9a9a9;">Worst Case:</span>
        <span style="background:#ff3a3d2b; color:#ff4b4b; padding:4px 16px; border-radius:7px;font-weight:700;">O(n)</span>
      </div>
    </div>
  </div>
  <div style="flex:1; background: linear-gradient(180deg, #191919 0%, #181818 100%); border-radius:13px; padding:22px 18px; color:#fff; border:1px solid #232;">
    <div style="display:flex; align-items:center; gap:9px; margin-bottom:9px;">
      <i class="fa-solid fa-database" style="color:#A855F7; font-size:23px;"></i>
      <span style="font-weight:900;">Space Complexity</span>
    </div>
    <div style="margin-top:14px;text-align:center;">
      <span style="background:#a855f744; color:#a855f7; padding:8px 18px; border-radius:8px; font-size:21px; font-weight:700;">O(1)</span>
    </div>
  </div>
</div>

<div id="tabs" style="display:flex; gap:8px; margin-bottom:15px;">
  <button class="tab-btn" data-tab="visualization" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Visualization</button>
  <button class="tab-btn" data-tab="explanation" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Explanation</button>
  <button class="tab-btn" data-tab="steps" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Steps</button>
  <button class="tab-btn" data-tab="code" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Pseudocode</button>
</div>
<div id="tab-content"></div>
<!-- COMMENTS SECTION -->
<div style="max-width:900px; margin:40px auto; background:#141414; padding:30px; border-radius:16px;">

  <h2 style="background:linear-gradient(90deg,#3B82F6,#A855F7);-webkit-background-clip:text; color:transparent; font-size:2rem; margin-bottom:18px;">Comments</h2>

  <% if (!currentUser) { %>
    <div style="background:#23223a; padding:20px; border-radius:12px; margin-bottom:20px; display:flex; align-items:center; gap:16px;">
      <i class="fa-solid fa-user-lock" style="font-size:2rem; color:#A855F7;"></i>
      <div>
        <p style="margin:0; color:#fff;">You must be logged in to comment.</p>
        <a href="/login" style="color:#3B82F6; text-decoration:underline;">Login</a>
      </div>
    </div>
  <% } %>

  <% if (currentUser) { %>
    <form action="<%= commentAction %>" method="POST" style="margin-bottom:28px; background:#181828; border-radius:14px; box-shadow:0 2px 12px #0002; padding:18px;">
      <div style="display:flex; align-items:flex-start; gap:14px;">
        <div style="width:44px; height:44px; background:#23223a; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; color:#A855F7; font-size:1.3rem;">
          <%= currentUser.name ? currentUser.name[0].toUpperCase() : "U" %>
        </div>
        <div style="flex:1;">
          <textarea name="content" rows="3" required style="width:100%; background:#23223a; color:white; padding:12px; border-radius:8px; border:none; font-size:1.08rem; resize:vertical;"></textarea>
          <button style="margin-top:10px; width:100%; padding:12px; background:linear-gradient(90deg,#3B82F6,#A855F7); border:none; color:white; border-radius:8px; font-weight:700; font-size:1.08rem; box-shadow:0 2px 8px #0002; transition:background 0.2s; cursor:pointer;">Add Comment</button>
        </div>
      </div>
    </form>
  <% } %>

  <% if (comments.length === 0) { %>
    <p style="color:#888; text-align:center;">No comments yet.</p>
  <% } %>

  <% comments.forEach(c => { %>
    <div style="background:#191926; padding:18px 22px; border-radius:14px; margin-bottom:18px; box-shadow:0 2px 10px #0003; transition:box-shadow 0.2s; display:flex; gap:16px; align-items:flex-start;">
      <div style="width:44px; height:44px; background:#23223a; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; color:#A855F7; font-size:1.3rem; flex-shrink:0;">
        <%= c.userName ? c.userName[0].toUpperCase() : "U" %>
      </div>
      <div style="flex:1;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2px;">
          <span style="font-weight:700; color:#A855F7; font-size:1.08rem;"><%= c.userName %></span>
          <span style="color:#888; font-size:0.98rem;"><%= c.createdAt.toLocaleString() %></span>
        </div>
        <p style="color:#e2e2e2; margin:7px 0 0 0; font-size:1.08rem;"> <%= c.content %> </p>
        <% if (currentUser && currentUser._id == c.userId) { %>
          <form action="<%= deleteAction + c._id %>" method="POST" style="text-align:right; margin-top:8px;">
            <button style="background:#db1710; color:white; padding:6px 16px; border:none; border-radius:7px; font-size:0.98rem; font-weight:700; cursor:pointer; box-shadow:0 1px 6px #0002; transition:background 0.2s;">Delete</button>
          </form>
        <% } %>
      </div>
    </div>
  <% }) %>
</div>
</div>
</main>

<%- include("partials/footer") %>

<script>
const algoJSON = {
  name: "Linear Search",
  category: "Searching",
  difficulty: "Easy",
  description: "A simple searching algorithm that checks every element in the array sequentially until the target element is found or the end of the array is reached.",
  timeComplexity: { best: "O(1)", avg: "O(n)", worst: "O(n)" },
  spaceComplexity: "O(1)",
  explanation: [
    "<span style='color:#fff; font-size:1.12rem; display:block;'>Linear Search works by sequentially checking each element in the array from start to finish.<br><br>This compares each element with the target value until a match is found or the end of the array is reached.<br><br>Best case occurs when the target is at the first position (O(1)).<br><br>Worst case occurs when the target is at the last position or not present in the array (O(n)).<br><br>This algorithm is simple but inefficient for large datasets. However, it works on both sorted and unsorted arrays.</span>"
  ],
  steps: [
    { num: 1, text: "Start from the first element of the array" },
    { num: 2, text: "Compare current element with target value" },
    { num: 3, text: "If match found, return the index" },
    { num: 4, text: "If not, move to the next element" },
    { num: 5, text: "Repeat until element is found or array ends" },
    { num: 6, text: "If array ends without finding, return -1" }
  ],
  pseudocode: [
    "for i = 0 to n-1:",
    "  if arr[i] == target:",
    "    return i",
    "return -1"
  ]
};

function highlightTab(tab) {
  Array.from(document.getElementsByClassName("tab-btn")).forEach(btn => {
    btn.style.background = "#232222";
    btn.style.color = "#fff";
    if (btn.getAttribute("data-tab") === tab) {
      btn.style.background = "linear-gradient(90deg,#3B82F6 0%,#A855F7 100%)";
      btn.style.color = "#fff";
    }
  });
}

function renderTab(tab) {
  const tabContent = document.getElementById("tab-content");
  highlightTab(tab);

  if (tab === "visualization") {
    tabContent.innerHTML = `
      <div style="background: linear-gradient(180deg, #191919 0%, #181818 100%);
                  border-radius:15px; padding:30px 24px; color:#fff; border:1px solid #222; margin-bottom:18px;">
        <h3 style="font-size:1.25rem; margin-bottom:16px;">Interactive Visualization</h3>
        <div style="display:flex; flex-wrap:wrap; gap:32px; align-items:flex-start;">
          <div style="flex:1;">
            <h4>Pseudocode</h4>
            <pre id="vis-pseudocode" style="background:#222435; border-radius:16px; color:#b8cfff; font-size:1.05rem; padding:24px; min-width:225px;">
  1. for i = 0 to n-1
  2. if arr[i] == target
  3.   return i
  4. return -1
            </pre>
            <div style="font-size:0.95rem; color:#6ba6ef; margin-top:3px;">
              <b>Legend:</b> <span style="color:#1e9bff;">● Currently checking</span>
            </div>
          </div>
          <div style="flex:2;">
            <h4>Visual Representation</h4>
            <div style="margin: 10px 0 16px 0;">
              <label for="speed-range" style="color:#bcc9ef;font-weight:600;">Speed:&nbsp;</label>
              <input type="range" id="speed-range" min="100" max="2000" value="600" step="100" style="vertical-align:middle;">
              <span id="speed-display" style="margin-left:7px;color:#9ef;">Medium</span>
            </div>
            <div style="margin-bottom:16px;">
              <input id="array-input" placeholder="Enter array (comma-separated)" value="15,23,7,42,18,31,9,56,12"
                     style="padding:5px 14px; border-radius:6px; border:1px solid #444; width:230px; background:#fff; color:#000;">
              <input id="target-input" placeholder="Target" value="31"
                     style="padding:5px 14px; border-radius:6px; border:1px solid #444; width:100px; margin-left:10px; background:#fff; color:#000;">
              <button id="run-btn" style="background:linear-gradient(90deg,#3B82F6 0%,#A855F7 100%); color:#fff; border:none; border-radius:6px; font-size:15px; font-weight:700; padding:5px 18px; cursor:pointer;margin-left:10px;">
                Search
              </button>
            </div>
            <div id="bar-container" style="display:flex; align-items:flex-end; gap:9px; min-height:170px; margin-top:10px;"></div>
            <div id="vis-status" style="background:#222435; color:#44e389; border-radius:11px; padding:11px 18px; margin-top:18px; min-height:28px; font-weight:700;"></div>
          </div>
        </div>
      </div>
      <h4 style="margin-top:20px; margin-bottom:10px;">Search Process - Step by Step</h4>
      <div id="dryrun-log" style="background:#131326; border-radius:13px; color:#d9ddff; padding:23px 17px; margin-bottom:17px; max-height:220px; overflow:auto; font-size:16px;"></div>
    `;
    setTimeout(setupVisualization, 30);
  } else if (tab === "explanation") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">How it Works</h3>
        ${algoJSON.explanation[0]}
      </div>
    `;
  } else if (tab === "steps") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">Algorithm Steps</h3>
        <div style="display:flex; flex-direction:column; gap:19px; margin-top:18px;">
          ${algoJSON.steps.map(step => `
            <div style="display: flex; align-items: center; gap:18px;">
              <span style="height:32px;width:32px;display:flex;align-items:center;justify-content:center; 
                          background:#7679fa;color:#fff;border-radius:50%;font-weight:700;font-size:1.12rem;">
                ${step.num}
              </span>
              <span style="font-size:1.08rem;color:#fff;flex:1">${step.text}</span>
              <i class="fa-regular fa-circle-check" style="font-size:1.2rem;color:#787c88"></i>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  } else if (tab === "code") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222; margin-bottom:7px;">
        <h3 style="font-size:1.22rem; margin-bottom:13px; color:#fff;">Pseudocode</h3>
        <pre style="background:#21242c; color:#bdcfff; border-radius:11px; font-size:1.09rem; padding:35px 28px; margin-bottom:20px; overflow-x:auto;">
for i = 0 to n-1:
  if arr[i] == target:
    return i
return -1
        </pre>
        <div style="background:#28355c;border-radius:10px;padding:15px 23px;font-size:1.07rem; color:#b9d5ff;">
          <span style="color:#88b6ff; font-weight:700;">Note:</span> This is pseudocode - a high-level description of the algorithm.
          You can implement this in any programming language like Python, Java, C++, or JavaScript.
          The function returns the index of the target element if found, otherwise returns -1.
        </div>
      </div>
    `;
  }
}

document.addEventListener("DOMContentLoaded", function () {
  renderTab("visualization");
  document.getElementById('tabs').onclick = function (e) {
    if (e.target.classList.contains('tab-btn')) {
      renderTab(e.target.getAttribute('data-tab'));
    }
  };
});

function setupVisualization() {
  const arrayInput = document.getElementById('array-input');
  const targetInput = document.getElementById('target-input');
  const runBtn = document.getElementById('run-btn');
  const barCont = document.getElementById('bar-container');
  const visStatus = document.getElementById('vis-status');
  const dryrunLog = document.getElementById('dryrun-log');
  const speedRange = document.getElementById('speed-range');
  const speedDisplay = document.getElementById('speed-display');
  let speed = parseInt(speedRange.value, 10);
  const speedLabels = [
    { val: 100, label: "Super-fast" },
    { val: 400, label: "Fast" },
    { val: 800, label: "Medium" },
    { val: 1200, label: "Normal" },
    { val: 2000, label: "Slow" }
  ];
  speedRange.oninput = function () {
    speed = parseInt(this.value, 10);
    let nearest = speedLabels.reduce((a, b) =>
      Math.abs(b.val - speed) < Math.abs(a.val - speed) ? b : a
    );
    speedDisplay.textContent = nearest.label || `${speed}ms`;
  };

  function drawArray(arr, currentIndex = -1, foundIndex = -1, checkedIndices = []) {
    barCont.innerHTML = arr.map((v, i) => `
      <div style="
        height:${40 + v * 2}px;
        width:42px;
        display:flex;
        flex-direction:column;
        justify-content:flex-end;
        align-items:center;
        border-radius:7px;
        margin-bottom:0;
        position:relative;
        ${foundIndex === i ? 'background:#20cc63!important; color:#fff; font-weight:900;' :
          currentIndex === i ? 'background:linear-gradient(90deg,#3B82F6 0%,#A855F7 100%)!important;color:#fff; font-weight:900;' :
          checkedIndices.includes(i) ? 'background:#ff4b4b!important; color:#fff; font-weight:700;' :
          'background:#222435; color:#2fbfff; font-weight:700;'}
        border:1.3px solid #222; margin-top:5px;">
        <div style="position:absolute; top:-24px; font-size:11px; color:#888; font-weight:600;">i=${i}</div>
        <span style="margin-bottom:7px; font-size:15px;">${v}</span>
      </div>
    `).join('');
  }

  function delay(ms) {
    return new Promise(res => setTimeout(res, ms));
  }

  runBtn.onclick = async function () {
    let arr = arrayInput.value.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
    let target = parseInt(targetInput.value.trim());
    let n = arr.length;
    let comparisons = 0;
    let checkedIndices = [];
    visStatus.innerHTML = "";
    dryrunLog.innerHTML = "";

    if (n === 0) {
      visStatus.innerHTML = "<span style='color:#ff5454'>Empty array!</span>";
      drawArray([], -1, -1, []);
      return;
    }
    if (isNaN(target)) {
      visStatus.innerHTML = "<span style='color:#ff5454'>Please enter a valid target value!</span>";
      drawArray(arr, -1, -1, []);
      return;
    }

    dryrunLog.innerHTML = `<div style='margin-bottom:12px;'>
      <span style='color:#69bfff;font-weight:700;'>Searching for: </span>
      <span style='background:#ffc914; color:#171717; padding:4px 12px; border-radius:6px; font-weight:800;'>${target}</span>
    </div>`;

    let foundIndex = -1;
    for (let i = 0; i < n; i++) {
      let spd = parseInt(speedRange.value, 10);
      comparisons++;
      drawArray(arr, i, -1, checkedIndices);
      visStatus.innerHTML = `Checking index ${i}: <b>${arr[i]}</b> ${arr[i] === target ? '==' : '!='} <b>${target}</b>`;
      let stepLog = `<div style='margin:6px 0'>
        <span style="color:#2fbfff; background:#222; border-radius:6px; padding:2px 10px;font-weight:800;">Step ${i + 1}:</span>
        <span style="margin-left:8px;">Check arr[${i}] = <b>${arr[i]}</b></span>`;

      if (arr[i] === target) {
        foundIndex = i;
        stepLog += `<span style="color:#20cc63;background:#232; margin-left:13px; border-radius:6px; padding:2px 8px;font-weight:700;">✓ Found!</span>`;
        dryrunLog.innerHTML += stepLog + "</div>";
        await delay(spd);
        drawArray(arr, -1, foundIndex, checkedIndices);
        visStatus.innerHTML = `<span style="color:#20cc63;">Element found at index ${foundIndex}! ✔</span><br>Comparisons: <b>${comparisons}</b>`;
        dryrunLog.innerHTML += `
          <div style="display:flex;gap:20px;margin-top:16px;">
            <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#20cc63;font-size:1.14rem;">
              Found at Index<br><span style="font-size:2.1rem;">${foundIndex}</span>
            </div>
            <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#b78fff;">
              Comparisons<br><span style="font-size:2.1rem;">${comparisons}</span>
            </div>
            <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#2fbfff;">
              Array Size<br><span style="font-size:2.1rem;">${n}</span>
            </div>
          </div>`;
        return;
      } else {
        stepLog += `<span style="color:#ff4b4b;background:#232; margin-left:13px; border-radius:6px; padding:2px 8px;font-weight:700;">✗ Not match</span>`;
        checkedIndices.push(i);
      }
      dryrunLog.innerHTML += stepLog + "</div>";
      await delay(spd);
    }

    // Element not found
    drawArray(arr, -1, -1, checkedIndices);
    visStatus.innerHTML = `<span style="color:#ff4b4b;">Element not found! ✗</span><br>Comparisons: <b>${comparisons}</b>`;
    dryrunLog.innerHTML += `
      <div style="display:flex;gap:20px;margin-top:16px;">
        <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#ff4b4b;font-size:1.14rem;">
          Result<br><span style="font-size:1.5rem;">Not Found</span>
        </div>
        <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#b78fff;">
          Comparisons<br><span style="font-size:2.1rem;">${comparisons}</span>
        </div>
        <div style="background:#131326;border-radius:10px;padding:18px 28px;min-width:135px;font-weight:700;color:#2fbfff;">
          Array Size<br><span style="font-size:2.1rem;">${n}</span>
        </div>
      </div>`;
  };

  // Draw initial array
  drawArray([15, 23, 7, 42, 18, 31, 9, 56, 12]);
  visStatus.innerHTML = "Enter an array and target value, then click Search";
}
</script>

</body>
</html>
