<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Binary Search — AlgoVisuals</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet" />
<script src="https://kit.fontawesome.com/c737e8ac77.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/style1.css" />
</head>
<body>
<%- include("partials/header") %>

<main class="container">
<div style="max-width:1200px; margin:60px auto; background:#181818; border-radius:24px; padding:38px; box-shadow:0 8px 34px #000a;">
<h1 style="background: linear-gradient(90deg,#3B82F6 0%,#A855F7 100%); -webkit-background-clip: text; background-clip: text; color: transparent; font-size:2.6rem; font-weight:800; margin-bottom:10px; display:inline;"> Binary Search</h1>
<span class="badge"
        style="background: linear-gradient(90deg,#E55D86 0%, #D0197E 100%); color: #fff; border-radius:8px; padding:6px 18px; margin-left:14px; font-size:1.1rem;">Searching</span>
      <span class="badge"
        style="background: linear-gradient(90deg,#2fc47f 0%, #3B82F6 100%); color: #fff; border-radius:8px; padding:6px 18px; margin-left:8px; font-size:1.1rem;">Easy</span>
<p style="color:#a8a8a8; margin-top:13px;">An efficient search algorithm for sorted lists that repeatedly divides the search interval in half to locate the target element.</p>

<div style="display:flex; gap:24px; margin-bottom:20px; margin-top:24px;">
  <div style="flex:1; background: linear-gradient(180deg, #191919 0%, #181818 100%); border-radius:13px; padding:22px 18px; color:#fff; border:1px solid #232;">
    <div style="display:flex; align-items:center; gap:9px; margin-bottom:9px;">
      <i class="fa-regular fa-clock" style="color:#3B82F6; font-size:23px;"></i>
      <span style="font-weight:900;">Time Complexity</span>
    </div>
    <div style="margin-top:7px;">
      <div style="display:flex; justify-content:space-between; margin-bottom:7px;">
        <span style="color:#a9a9a9;">Best Case:</span>
        <span style="background:#3bdf8d2b; color:#16ad56; padding:4px 19px; border-radius:7px;font-weight:700;">O(1)</span>
      </div>
      <div style="display:flex; justify-content:space-between; margin-bottom:7px;">
        <span style="color:#a9a9a9;">Average Case:</span>
        <span style="background:#f5ca5035; color:#ceb254; padding:4px 14px; border-radius:7px;font-weight:700;">O(n)</span>
      </div>
      <div style="display:flex; justify-content:space-between;">
        <span style="color:#a9a9a9;">Worst Case:</span>
        <span style="background:#ff3a3d2b; color:#ff4b4b; padding:4px 16px; border-radius:7px;font-weight:700;">O(n)</span>
      </div>
    </div>
  </div>
  <div style="flex:1; background: linear-gradient(180deg, #191919 0%, #181818 100%); border-radius:13px; padding:22px 18px; color:#fff; border:1px solid #232;">
    <div style="display:flex; align-items:center; gap:9px; margin-bottom:9px;">
      <i class="fa-solid fa-database" style="color:#A855F7; font-size:23px;"></i>
      <span style="font-weight:900;">Space Complexity</span>
    </div>
    <div style="margin-top:14px;text-align:center;">
      <span style="background:#a855f744; color:#a855f7; padding:8px 18px; border-radius:8px; font-size:21px; font-weight:700;">O(1)</span>
    </div>
  </div>
</div>

<div id="tabs" style="display:flex; gap:8px; margin-bottom:15px;">
  <button class="tab-btn" data-tab="visualization" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Visualization</button>
  <button class="tab-btn" data-tab="explanation" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Explanation</button>
  <button class="tab-btn" data-tab="steps" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Steps</button>
  <button class="tab-btn" data-tab="code" style="flex:1; padding:12px 0; border-radius:12px; border:none; background:#232222; color:#fff; font-weight:700; cursor:pointer; font-size:1.13rem;">Pseudocode</button>
</div>
<div id="tab-content"></div>
</div>
</main>

<%- include("partials/footer") %>

<script>
const algoJSON = {
  name: "Binary Search",
  category: "Searching",
  difficulty: "Easy",
  description: "An efficient search algorithm that finds the position of a target value within a sorted array by repeatedly dividing the search interval in half.",
  timeComplexity: { best: "O(1)", avg: "O(log n)", worst: "O(log n)" },
  spaceComplexity: "O(1)",
  explanation: [
    `<span style="color:#fff; font-size:1.12rem; display:block;">
      Binary Search works on a sorted array by repeatedly dividing the search interval in half.<br><br>
      At each step, it compares the target to the middle element.<br><br>
      If the target equals the middle, return the index.<br><br>
      If less, repeat on the left half; if more, repeat on the right half.<br><br>
      Search ends if the range is exhausted.<br>
    </span>`
  ],
  steps: [
    { num: 1, text: "Start with the entire sorted array" },
    { num: 2, text: "Find the middle element of the current range" },
    { num: 3, text: "Compare middle element with target value" },
    { num: 4, text: "If equal, target found - return position" },
    { num: 5, text: "If target < middle, search left half" },
    { num: 6, text: "If target > middle, search right half" },
    { num: 7, text: "Repeat until found or range is empty" }
  ],
  pseudocode: [
    "binarySearch(arr, target):",
    "  low = 0, high = n-1",
    "  while low <= high:",
    "    mid = low + (high - low) // 2",
    "    if arr[mid] == target:",
    "      return mid",
    "    elif arr[mid] < target:",
    "      low = mid + 1",
    "    else:",
    "      high = mid - 1",
    "  return -1"
  ]
};

function highlightTab(tab) {
  Array.from(document.getElementsByClassName("tab-btn")).forEach(btn => {
    btn.style.background = "#232222";
    btn.style.color = "#fff";
    if (btn.getAttribute("data-tab") === tab) {
      btn.style.background = "linear-gradient(90deg,#3B82F6 0%,#A855F7 100%)";
      btn.style.color = "#fff";
    }
  });
}

function renderTab(tab) {
  const tabContent = document.getElementById("tab-content");
  highlightTab(tab);

  if (tab === "visualization") {
    tabContent.innerHTML = `
      <div style="background: linear-gradient(180deg, #191919 0%, #181818 100%);
                  border-radius:15px; padding:30px 24px; color:#fff; border:1px solid #222; margin-bottom:18px;">
        <h3 style="font-size:1.25rem; margin-bottom:16px;">Interactive Visualization</h3>
        <div style="display:flex; flex-wrap:wrap; gap:32px; align-items:flex-start;">
          <div style="flex:1;">
            <h4>Pseudocode</h4>
            <pre id="vis-pseudocode" style="background:#222435; border-radius:16px; color:#b8cfff; font-size:1.05rem; padding:24px; min-width:225px;">
${algoJSON.pseudocode.map(l => ` ${l}`).join("\n")}
            </pre>
            <div style="font-size:0.95rem; color:#6ba6ef; margin-top:3px;">
              <b>Legend:</b>
              <span style="color:#FACC15;">● Low</span>
              <span style="color:#FB923C;">● High</span>
              <span style="color:#A855F7;">● Mid</span>
              <span style="color:#20cc63;">● Found</span>
              <span style="color:#3B82F6;">● Current range</span>
              <span style="color:#888;">● Eliminated</span>
            </div>
          </div>
          <div style="flex:2;">
            <h4>Visual Representation</h4>
            <div style="margin: 10px 0 16px 0;">
              <label for="speed-range" style="color:#bcc9ef;font-weight:600;">Speed:&nbsp;</label>
              <input type="range" id="speed-range" min="200" max="2000" value="800" step="200" style="vertical-align:middle;">
              <span id="speed-display" style="margin-left:7px;color:#9ef;">Medium</span>
            </div>
            <div style="margin-bottom:16px;">
              <input id="array-input" placeholder="Enter sorted array (comma-separated)" value="2,5,8,12,16,23,38,45,67,78,89,95"
                     style="padding:5px 14px; border-radius:6px; border:1px solid #444; width:230px; background:#fff; color:#000;">
              <input id="target-input" placeholder="Target" value="23"
                     style="padding:5px 14px; border-radius:6px; border:1px solid #444; width:100px; margin-left:10px; background:#fff; color:#000;">
              <button id="run-btn" style="background:linear-gradient(90deg,#3B82F6 0%,#A855F7 100%); color:#fff; border:none; border-radius:6px; font-size:15px; font-weight:700; padding:5px 18px; cursor:pointer;margin-left:10px;">
                Search
              </button>
            </div>
            <div id="bar-container" style="display:flex; align-items:flex-end; gap:9px; min-height:170px; margin-top:10px;"></div>
            <div id="vis-status" style="background:#222435; color:#44e389; border-radius:11px; padding:11px 18px; margin-top:18px; min-height:28px; font-weight:700;"></div>
          </div>
        </div>
      </div>
      <h4 style="margin-top:20px; margin-bottom:10px;">Search Process - Step by Step</h4>
      <div id="dryrun-log" style="background:#131326; border-radius:13px; color:#d9ddff; padding:23px 17px; margin-bottom:17px; max-height:220px; overflow:auto; font-size:16px;"></div>
    `;
    setTimeout(setupVisualization, 30);
  } else if (tab === "explanation") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">How it Works</h3>
        ${algoJSON.explanation[0]}
      </div>
    `;
  } else if (tab === "steps") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">Algorithm Steps</h3>
        <div style="display:flex; flex-direction:column; gap:19px; margin-top:18px;">
          ${algoJSON.steps.map(step => `
            <div style="display: flex; align-items: center; gap:18px;">
              <span style="height:32px;width:32px;display:flex;align-items:center;justify-content:center;
                          background:#7679fa;color:#fff;border-radius:50%;font-weight:700;font-size:1.12rem;">
                ${step.num}
              </span>
              <span style="font-size:1.08rem;color:#fff;flex:1">${step.text}</span>
              <i class="fa-regular fa-circle-check" style="font-size:1.2rem;color:#787c88"></i>
            </div>
          `).join('')}
        </div>
      </div>
    `;
  } else if (tab === "code") {
    tabContent.innerHTML = `
      <div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222; margin-bottom:7px;">
        <h3 style="font-size:1.22rem; margin-bottom:13px; color:#fff;">Pseudocode</h3>
        <pre style="background:#21242c; color:#bdcfff; border-radius:11px; font-size:1.09rem; padding:35px 28px; margin-bottom:20px; overflow-x:auto;">
${algoJSON.pseudocode.join('\n')}
        </pre>
        <div style="background:#28355c;border-radius:10px;padding:15px 23px;font-size:1.07rem; color:#b9d5ff;">
          <span style="color:#88b6ff; font-weight:700;">Note:</span>
          This is pseudocode - a high-level description of the algorithm. You can implement this in any programming language like Python, Java, C++, or JavaScript.
        </div>
      </div>
    `;
  }
}

document.addEventListener("DOMContentLoaded", function () {
  renderTab("visualization");
  document.getElementById('tabs').onclick = function (e) {
    if (e.target.classList.contains('tab-btn')) {
      renderTab(e.target.getAttribute('data-tab'));
    }
  };
});

function setupVisualization() {
  const arrayInput = document.getElementById('array-input');
  const targetInput = document.getElementById('target-input');
  const runBtn = document.getElementById('run-btn');
  const barCont = document.getElementById('bar-container');
  const visStatus = document.getElementById('vis-status');
  const dryrunLog = document.getElementById('dryrun-log');
  const speedRange = document.getElementById('speed-range');
  const speedDisplay = document.getElementById('speed-display');
  let speed = parseInt(speedRange.value, 10);

  drawArray(arrayInput.value.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x)));

  const speedLabels = [
    { val: 200, label: "Super-fast" },
    { val: 600, label: "Fast" },
    { val: 1000, label: "Medium" },
    { val: 1400, label: "Normal" },
    { val: 2000, label: "Slow" }
  ];
  speedRange.oninput = function () {
    speed = parseInt(this.value, 10);
    let nearest = speedLabels.reduce((a, b) =>
      Math.abs(b.val - speed) < Math.abs(a.val - speed) ? b : a
    );
    speedDisplay.textContent = nearest.label || `${speed}ms`;
  };

  function drawArray(arr, low = -1, high = -1, mid = -1, found = -1) {
    barCont.innerHTML = arr.map((v, i) => {
      let barColor = "background:#222435;color:#888;";

      if (found === i) barColor = "background:#20cc63;color:#fff;font-weight:900;";
      else if (i === low) barColor = "background:#FACC15;color:#fff;font-weight:800;"; // yellow for low
      else if (i === high) barColor = "background:#FB923C;color:#fff;font-weight:800;"; // orange for high
      else if (i === mid) barColor = "background:#A855F7;color:#fff;font-weight:900;"; // purple for mid
      else if (i > low && i < high) barColor = "background:linear-gradient(90deg,#3B82F6 0%,#A855F7 100%);color:#fff;font-weight:700;";

      return `
        <div style="display:flex; flex-direction:column; align-items:center; justify-content:flex-end;">
          <div style="color:#53b2fd; font-size:12px; font-weight:700; margin-bottom:4px;">i=${i}</div>
          <div style="height:${45 + v * 1.1}px; width:44px; display:flex; flex-direction:column; justify-content:flex-end; align-items:center; border-radius:8px; ${barColor} border:1.3px solid #222;">
            <span style="margin-bottom:7px; font-size:15px;">${v}</span>
          </div>
        </div>
      `;
    }).join('');
  }

  function delay(ms) {
    return new Promise(res => setTimeout(res, ms));
  }

  runBtn.onclick = async function () {
    let arr = arrayInput.value.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
    let target = parseInt(targetInput.value.trim());
    let n = arr.length;
    let comparisons = 0, iterations = 0;
    visStatus.innerHTML = "";
    dryrunLog.innerHTML = "";

    if (n === 0) {
      visStatus.innerHTML = "<span style='color:#ff5454'>Empty array!</span>";
      drawArray([], -1, -1, -1, -1);
      return;
    }
    if (isNaN(target)) {
      visStatus.innerHTML = "<span style='color:#ff5454'>Please enter a valid target value!</span>";
      drawArray(arr, -1, -1, -1, -1);
      return;
    }

    dryrunLog.innerHTML = `<div style='margin-bottom:12px;'>
      <span style='color:#69bfff;font-weight:700;'>Searching for: </span>
      <span style='background:#ffc914; color:#171717; padding:4px 12px; border-radius:6px; font-weight:800;'>${target}</span>
    </div>`;

    let low = 0, high = n - 1, found = -1;
    while (low <= high) {
      iterations++;
      let mid = Math.floor(low + (high - low) / 2);
      comparisons++;

      drawArray(arr, low, high, mid, -1);
      visStatus.innerHTML = `Checking mid index ${mid}: <b>${arr[mid]}</b>`;

      dryrunLog.innerHTML +=
        `<div style='margin:6px 0'>
          <span style="color:#2fbfff; background:#222; border-radius:6px; padding:2px 10px;font-weight:800;">Iteration ${iterations}:</span>
          <span style="margin-left:8px;">Check arr[${mid}] = <b>${arr[mid]}</b></span>`;

      await delay(speed);

      if (arr[mid] === target) {
        found = mid;
        drawArray(arr, low, high, mid, found);
        visStatus.innerHTML = `<span style="color:#20cc63;">Element found at index ${found}! ✔</span><br>Comparisons: <b>${comparisons}</b>`;
        dryrunLog.innerHTML += `<span style="color:#20cc63;background:#232; margin-left:13px; border-radius:6px; padding:2px 8px;font-weight:700;">✓ Found!</span></div>`;
        return;
      } else if (arr[mid] < target) {
        dryrunLog.innerHTML += `<span style="color:#ff6b35;background:#232; margin-left:13px; border-radius:6px; padding:2px 8px;font-weight:700;">Search right half</span></div>`;
        low = mid + 1;
      } else {
        dryrunLog.innerHTML += `<span style="color:#A855F7;background:#232; margin-left:13px; border-radius:6px; padding:2px 8px;font-weight:700;">Search left half</span></div>`;
        high = mid - 1;
      }
      await delay(speed);
    }

    drawArray(arr, -1, -1, -1, -1);
    visStatus.innerHTML = `<span style="color:#ff4b4b;">Element not found! ✗</span><br>Comparisons: <b>${comparisons}</b>`;
  };
}
</script>


</body>
</html>
