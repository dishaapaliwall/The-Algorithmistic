<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Insertion Sort — AlgoVisuals</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800;900&display=swap" rel="stylesheet" />
  <script src="https://kit.fontawesome.com/c737e8ac77.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" />
  <style>
    :root {
      --color-background: #0a0a0a;
      --color-surface: #181818;
      --color-text: #f5f5f5;
      --color-text-secondary: #a8a8a8;
      --color-primary: #3B82F6;
      --color-primary-hover: #2563eb;
      --color-purple: #A855F7;
      --color-success: #20cc63;
      --color-warning: #ffc914;
      --color-error: #ff4b4b;
      --color-info: #2fbfff;
      --color-border: #232323;
      --color-target: #ff6b35;
      --color-mid: #A855F7;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--color-background); color: var(--color-text); line-height: 1.6;
    }
    .header-container { background: var(--color-surface); position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);}
    .topbar { max-width: 1400px; margin: 0 auto; padding: 16px 32px;}
    .brand { display: flex; align-items: center; justify-content: space-between;}
    .logo { display: flex; align-items: center; gap: 12px;}
    .logo img { height: 48px; width: auto; border-radius: 8px;}
    .nav { display: flex; align-items: center; gap: 32px;}
    .nav a { color: var(--color-text); text-decoration: none; font-size: 15px; transition: color 0.2s;}
    .nav a:hover { color: var(--color-primary);}
    .nav .btn { background: linear-gradient(90deg, var(--color-primary) 0%, var(--color-purple) 100%); color: white; padding: 10px 24px; border-radius: 8px; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s;}
    .nav .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);}
    .headerline { border: none; height: 1px; background: var(--color-border);}
    .container { max-width: 1400px; margin: 0 auto; padding: 24px 32px;}
    .badge { display: inline-block; padding: 6px 18px; border-radius: 8px; font-size: 1.1rem; font-weight: 600; color: white;}
    .tab-btn { flex: 1; padding: 12px 0; border-radius: 12px; border: none; background: #232222; color: #fff; font-weight: 700; cursor: pointer; font-size: 1.13rem; transition: all 0.3s;}
    .tab-btn:hover { background: #2a2a2a; }
    .tab-btn.active { background: linear-gradient(90deg, #3B82F6 0%, #A855F7 100%); color:#fff; }
    @media (max-width: 768px) {
      .nav { gap: 16px;}
      .footer-main { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="header-container">
    <header class="topbar">
      <div class="brand">
        <div class="logo">
          <img src="logoo.jpg" alt="Algorithmistic" />
        </div>
        <nav class="nav">
          <a href="helo.html"><b>Home</b></a>
          <a href="#"><b>Features</b></a>
          <a href="#"><b>How it Works</b></a>
          <a href="#"><b>Trending</b></a>
          <a href="#"><b>About Us</b></a>
          <a class="btn small" href="login.html">Get Started</a>
        </nav>
      </div>
    </header>
    <hr class="headerline" />
  </div>
  <main class="container">
    <div style="max-width:1200px; margin:60px auto; background:#181818; border-radius:24px; padding:38px; box-shadow:0 8px 34px #000a;">
      <h1 style="background: linear-gradient(90deg,#3B82F6 0%,#A855F7 100%);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent; font-size:2.6rem; font-weight:800; margin-bottom:10px; display:inline;">
        Insertion Sort</h1>
      <span class="badge"
        style="background: linear-gradient(90deg,#1A4141 0%, #43A774 100%);">Sorting</span>
      <span class="badge"
        style="background: linear-gradient(90deg,#2fc47f 0%, #3B82F6 100%); margin-left:8px;">Medium</span>
      <p style="color:#a8a8a8; margin-top:13px;">An efficient comparison-based sorting algorithm that builds the sorted array one element at a time by inserting each element into its correct position.</p>
      <div id="tabs" style="display:flex; gap:8px; margin-bottom:15px;">
        <button class="tab-btn" data-tab="visualization">Visualization</button>
        <button class="tab-btn" data-tab="explanation">Explanation</button>
        <button class="tab-btn" data-tab="steps">Steps</button>
        <button class="tab-btn" data-tab="code">Pseudocode</button>
      </div>
      <div id="tab-content"></div>
    </div>
  </main>

  <script>
    const algoJSON = {
      name: "Insertion Sort",
      category: "Sorting",
      difficulty: "Medium",
      description: "An efficient comparison-based sorting algorithm that builds the sorted array one element at a time by inserting each element into its correct position.",
      timeComplexity: { best: "O(n)", avg: "O(n^2)", worst: "O(n^2)" },
      spaceComplexity: "O(1)",
      explanation: [
        `<span style="color:#fff; font-size:1.12rem; display:block;">
          <strong>Insertion Sort</strong> sorts an array by repeatedly inserting an unsorted element into the correct position in the sorted portion.<br><br>
          <strong style="color:#3B82F6;">Start from the second element:</strong> Consider the first element as sorted.<br><br>
          <strong style="color:#A855F7;">Insert element in sorted portion:</strong> Compare the current element to earlier sorted elements and shift them to the right to make space.<br><br>
          <strong style="color:#ff6b35;">Place element:</strong> Insert the element in the correct position.<br><br>
          <strong style="color:#20cc63;">Repeat:</strong> Repeat for each remaining element until the entire array is sorted.</span>`
      ],
      steps: [
        { num: 1, text: "Start with the second element" },
        { num: 2, text: "Compare with elements in sorted portion" },
        { num: 3, text: "Shift elements to the right if they are greater" },
        { num: 4, text: "Insert the element in the correct position" },
        { num: 5, text: "Repeat for all elements" },
      ],
      pseudocode: [
`insertionSort(arr):
  for i from 1 to length(arr)-1:
    key = arr[i]
    j = i - 1
    while j >= 0 and arr[j] > key:
      arr[j + 1] = arr[j]
      j = j - 1
    arr[j + 1] = key`
      ]
    };

    function highlightTab(tab) {
      Array.from(document.getElementsByClassName("tab-btn")).forEach((btn) => {
        btn.classList.remove("active");
        if (btn.getAttribute("data-tab") === tab) btn.classList.add("active");
      });
    }

    function renderTab(tab) {
      const tabContent = document.getElementById("tab-content");
      highlightTab(tab);

      if (tab === "visualization") {
        tabContent.innerHTML = `
      <div style="background: linear-gradient(180deg, #191919 0%, #181818 100%);
                  border-radius:15px; padding:30px 24px; color:#fff; border:1px solid #222; margin-bottom:18px;">
        <div style="display:flex; flex-wrap:wrap; gap:32px; align-items:flex-start;">
          <div style="flex:1; min-width:280px;">
            <input id="array-input" value="5,2,9,1,5,6" style="padding:5px 14px; border-radius:6px; border:1px solid #444; width:250px; background:#222; color:#fff;">
            <button id="run-btn" style="background:linear-gradient(90deg,#3B82F6 0%,#A855F7 100%); color:#fff; border:none; border-radius:6px; font-size:15px; font-weight:700; padding:5px 18px; cursor:pointer;">Sort</button>
            <div id="bar-container" style="display:flex; gap:12px; min-height:200px; margin-top:20px; padding:20px; background:#0d0d0d; border-radius:12px; overflow-x:auto;"></div>
            <div id="vis-status" style="background:#222435; color:#44e389; border-radius:11px; padding:11px 18px; margin-top:18px; min-height:28px; font-weight:700;"></div>
            <div id="dryrun-log" style="background:#131326; border-radius:13px; color:#d9ddff; padding:23px 17px; margin-top:16px; max-height:300px; overflow:auto; font-size:15px;"></div>
          </div>
        </div>
      </div>
      `;
      setupVisualization();
      } else if (tab === "explanation") {
        tabContent.innerHTML = `<div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">How it Works</h3>
        ${algoJSON.explanation[0]}
      </div>`;
      } else if (tab === "steps") {
        tabContent.innerHTML = `<div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222;">
        <h3 style="font-size:1.22rem; margin-bottom:15px; color:#fff;">Algorithm Steps</h3>
        <div style="display:flex; flex-direction:column; gap:19px; margin-top:18px;">
          ${algoJSON.steps.map(step => `<div style="display:flex; align-items:center; gap:18px;">
            <span style="height:32px;width:32px;display:flex;align-items:center;justify-content:center;
                        background:#7679fa;color:#fff;border-radius:50%;font-weight:700;font-size:1.12rem;">${step.num}</span>
            <span style="font-size:1.08rem;color:#fff;flex:1">${step.text}</span>
          </div>`).join("")}
        </div>
      </div>`;
      } else if (tab === "code") {
        tabContent.innerHTML = `<div style="background:linear-gradient(180deg,#191919 0%, #181818 100%);
                  border-radius:15px; padding:38px 28px; color:#fff; border:1px solid #222; margin-bottom:7px;">
        <h3 style="font-size:1.22rem; margin-bottom:13px; color:#fff;">Pseudocode</h3>
        <pre style="background:#21242c; color:#bdcfff; border-radius:11px; font-size:1.05rem; padding:35px 28px; margin-bottom:20px; overflow-x:auto; line-height:1.6;">
${algoJSON.pseudocode[0]}
        </pre>
      </div>`;
      }
    }

    document.addEventListener("DOMContentLoaded", function () {
      renderTab("visualization");
      document.getElementById("tabs").addEventListener("click", function (e) {
        if (e.target.classList.contains("tab-btn")) {
          renderTab(e.target.getAttribute("data-tab"));
        }
      });
    });

    function setupVisualization() {
      const arrayInput = document.getElementById("array-input");
      const runBtn = document.getElementById("run-btn");
      const barCont = document.getElementById("bar-container");
      const visStatus = document.getElementById("vis-status");
      const dryrunLog = document.getElementById("dryrun-log");

      function drawArray(arr, keyIndex = -1, compareIndex = -1, sortedUntil = -1) {
        barCont.innerHTML = "";
        arr.forEach((value, i) => {
          let bgColor = "#222435", borderColor = "#333", label = "", textColor = "#fff";
          if (i === keyIndex) {
            bgColor = "#ff6b35"; borderColor = "#ff6b35"; label = "KEY";
          } else if (i === compareIndex) {
            bgColor = "#A855F7"; borderColor = "#A855F7"; label = "CMP";
          } else if (i <= sortedUntil) {
            bgColor = "linear-gradient(135deg,#3B82F6 0%,#2563eb 100%)"; borderColor = "#3B82F6";
          }
          const bar = document.createElement("div");
          bar.style.position = "relative";
          bar.style.minWidth = "56px";
          bar.style.height = "56px";
          bar.style.background = bgColor;
          bar.style.color = textColor;
          bar.style.border = `2.5px solid ${borderColor}`;
          bar.style.borderRadius = "10px";
          bar.style.fontWeight = "700";
          bar.style.fontSize = "19px";
          bar.style.display = "flex";
          bar.style.flexDirection = "column";
          bar.style.alignItems = "center";
          bar.style.justifyContent = "center";
          bar.style.margin = "2px";
          bar.innerText = value;
          if (label) {
            const labelDiv = document.createElement("div");
            labelDiv.style.position = "absolute";
            labelDiv.style.top = "-24px";
            labelDiv.style.fontSize = "10px";
            labelDiv.style.color = borderColor;
            labelDiv.style.fontWeight = "900";
            labelDiv.style.whiteSpace = "nowrap";
            labelDiv.style.background = "#0a0a0a";
            labelDiv.style.padding = "2px 6px";
            labelDiv.style.borderRadius = "4px";
            labelDiv.innerText = label;
            bar.appendChild(labelDiv);
          }
          const idxDiv = document.createElement("div");
          idxDiv.style.fontSize = "11px";
          idxDiv.style.color = "#888";
          idxDiv.style.position = "absolute";
          idxDiv.style.bottom = "-22px";
          idxDiv.innerText = `i=${i}`;
          bar.appendChild(idxDiv);
          barCont.appendChild(bar);
        });
      }

      function delay(ms) { return new Promise(res => setTimeout(res, ms)); }

      async function insertionSortVisualized(arr) {
        dryrunLog.innerHTML = `<div style='margin-bottom:12px; font-size:16px;'><span style='color:#69bfff; font-weight:700;'>Starting Insertion Sort:</span> <span style='color:#fff;'>Array: [${arr.join(", ")}]</span></div>`;
        let n = arr.length;
        for (let i = 1; i < n; i++) {
          let key = arr[i], j = i - 1;
          dryrunLog.innerHTML += `<div style='margin:10px 0; padding:12px; background:#1a1a2e; border-radius:8px; border-left:4px solid #3B82F6;'><span style='color:#3B82F6; font-weight:800;'>Iteration ${i}</span><div style='margin:8px 0 8px 20px; color:#fff;'>Key element: ${key} at index ${i}</div></div>`;
          drawArray(arr, i, null, i - 1);
          visStatus.innerHTML = `<b>Iteration ${i}:</b> Key element is <b>${key}</b>`;
          await delay(800);
          while (j >= 0 && arr[j] > key) {
            dryrunLog.innerHTML += `<div style='margin:8px 0 8px 40px; color:#A855F7; font-weight:700;'>Compare: arr[${j}] = ${arr[j]} > key ${key} → shift arr[${j}] to arr[${j + 1}]</div>`;
            arr[j + 1] = arr[j];
            drawArray(arr, i, j, i - 1);
            visStatus.innerHTML = `<b>Shifting index ${j}:</b> arr[${j}] = ${arr[j]} > key ${key}, shifting right`;
            await delay(800);
            j--;
          }
          arr[j + 1] = key;
          dryrunLog.innerHTML += `<div style='margin:8px 0 8px 40px; color:#20cc63; font-weight:700; background:#232; padding:8px; border-radius:6px;'>Insert key ${key} at position ${j + 1}</div>`;
          drawArray(arr, j + 1, null, i);
          visStatus.innerHTML = `<span style="color:#20cc63;">Inserted!</span> Key ${key} placed at index ${j + 1}`;
          await delay(800);
        }
        visStatus.innerHTML = `<span style="color:#20cc63;">Sorting complete! ✔</span>`;
        dryrunLog.innerHTML += `<div style="margin-top: 16px; font-weight: 700; color: #20cc63;">✅ Insertion Sort finished! Result: [${arr.join(", ")}]</div>`;
      }

      runBtn.onclick = async function() {
        let arr = arrayInput.value.split(",").map(x => parseInt(x.trim())).filter(x => !isNaN(x));
        visStatus.innerHTML = "";
        dryrunLog.innerHTML = "";
        if (arr.length === 0) {
          visStatus.innerHTML = "<span style='color:#ff5454'>Array is empty!</span>";
          drawArray([], -1, -1, -1);
          return;
        }
        drawArray(arr);
        await insertionSortVisualized(arr);
      };
    }
  </script>
</body>
</html>
